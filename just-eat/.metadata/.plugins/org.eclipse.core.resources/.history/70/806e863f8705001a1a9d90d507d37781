package com.parcelpickupFrontEnd;


import org.junit.Assert;
import org.openqa.selenium.By;
import org.openqa.selenium.Dimension;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.testng.annotations.*;
import org.testng.annotations.Test;
import org.testng.annotations.Parameters;
import org.testng.annotations.Optional;
import org.junit.FixMethodOrder;
import org.junit.runners.MethodSorters;

import com.sharedlibrary.Components;
import com.sharedlibrary.Helper;


@FixMethodOrder(MethodSorters.NAME_ASCENDING)

public class IilpFlagTest {
	private static WebDriver driver;
	private static Helper helper;

	@BeforeClass
	@Parameters({ "browser" })
	public  void setUp(@Optional("chrome") String browser) throws Exception {
		helper = Helper.getInstance();
		driver = Helper.getDriver(browser);
		driver.manage().window().setSize(new Dimension(1360, 1000));
		System.out.println("Starting test " + new Object() {}.getClass().getEnclosingMethod().getName());
		driver.navigate().to(helper.getProperty("stagingHome"));

	}

	@Test

	public void iipPresented() throws InterruptedException {
		String user = "noiilpuserl";
		String password = "noiilppassword";		
		String testName = "Starting test " + new Object() {}.getClass().getEnclosingMethod().getName();
		helper.signInCP(driver, user, password, testName);
		System.out.println("Starting test " + new Object() {
		}.getClass().getEnclosingMethod().getName());
		driver.navigate().to(helper.getProperty("parcelPickup"));
		helper.closeCookieBanner(driver);
		Components.alternateAddress(driver, "L4X2R2");
		//// Instructions
		Components.instructions(driver);
		//// buton continue
		driver.findElement(By.id("contactSubmit")).click();
		Thread.sleep(4000);
		//////Packing
		//Grouped on pallets or in containers
		WebElement iip = driver.findElement(By.cssSelector("label[for=iilp]"));
		Boolean isPrsented = iip.isDisplayed();
		Assert.assertEquals(true, isPrsented);
}
	@Test

	public void iipNotPresented() throws InterruptedException {
		String user = "erpUser";
		String password = "erpPassword";		
		String testName = "Starting test " + new Object() {}.getClass().getEnclosingMethod().getName();
		helper.signInCP(driver, user, password, testName);
		System.out.println("Starting test " + new Object() {
		}.getClass().getEnclosingMethod().getName());
		driver.navigate().to(helper.getProperty("parcelPickup"));
		helper.closeCookieBanner(driver);
		Components.alternateAddress(driver, "L4X2R2");
		//// Instructions
		Components.instructions(driver);
		//// buton continue
		driver.findElement(By.id("contactSubmit")).click();
		Thread.sleep(4000);
		//////Packing
		//Grouped on pallets or in containers
		WebElement iip = helper.FindElementSafe(driver, By.cssSelector("label[for=iilp]"));
		
		Assert.assertEquals(null, iip);
}

	@AfterClass
	public  void closeBrowser() throws Exception {
		helper.takeScreenshot(driver, "IilpFlag");		
		driver.quit();
	}
}